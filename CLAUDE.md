# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際のClaude Code (claude.ai/code)への指針を提供します。

## リポジトリ概要

macOSとLinuxシステムをまたいだポリグロット開発環境のための包括的なdotfilesリポジトリです。

## 共通コマンド

### 初期セットアップ
```bash
# すべてのdotfilesのシンボリックリンクを作成
./setup

# 複数言語対応のasdfバージョンマネージャーをセットアップ
./setup_asdf
```

### 開発コマンド

これはdotfilesリポジトリのため、従来のビルド/テストコマンドはありません。ただし、設定を変更した場合：

1. **シェル設定の変更後**: `source ~/.zshrc`でシェルをリロードするか、新しいターミナルを開く
2. **tmux設定の変更後**: `<prefix> + r`でtmuxをリロード（prefixはCtrl+t）
3. **vim設定の変更後**: vimを再起動するか`:source ~/.vimrc`を実行

## アーキテクチャと構造

### モジュラーシェル設定
シェル設定はモジュラーアプローチに従います。メインの`.zshrc`は以下の順序でファイルを読み込みます：
- `.zsh/plugins.zsh` - プラグイン管理（prezto/oh-my-zsh）
- `.zsh/global.zsh` - グローバル環境変数
- `.zsh/settings.zsh` - シェルオプションと動作
- `.zsh/aliases.zsh` - コマンドエイリアス
- `.zsh/functions.zsh` - カスタムシェル関数
- `.zsh/app_settings.zsh` - アプリケーション固有の設定
- `.zsh/os/` - プラットフォーム固有の設定（macOS/Linux）

### バージョン管理戦略
リポジトリは以下の優先順位で複数のバージョンマネージャーをサポート：
1. `mise`（利用可能な場合は優先）
2. `asdf`（フォールバック、セットアップスクリプト付き）
3. `anyenv`（レガシーサポート）

### 主要な統合ポイント

**Gitワークフロー**: カスタムgitエイリアスと関数が`fzf`と統合してインタラクティブな操作を提供：
- `fbr()` - ファジーブランチ切り替え
- `pr-checkout()` - GitHub PRチェックアウト
- Gitは拡張差分表示のために`delta`を使用

**開発ツール**: 
- Dockerエイリアスは`dk`プレフィックスを使用（例：docker-composeの`dkc`）
- 言語固有の設定により、プレフィックスが不要（例：Rubyで`bundle exec`が不要）
- カスタム設定とプラグインを持つtmuxによるターミナル多重化

**エディタサポート**: モジュラーな`.vim/`ディレクトリ構造を持つvim/neovimの設定

### 重要なパターン

1. **防御的スクリプティング**: すべてのスクリプトはエイリアス設定前にコマンドの存在を確認
2. **カラー出力**: セットアップスクリプトは一貫したカラーコーディングを使用（緑=成功、赤=エラー）
3. **OS検出**: 検出されたOS（Darwin/Linux）に基づいて設定を適応
4. **シンボリックリンク戦略**: セットアップスクリプトはファイルをコピーするのではなくシンボリックリンクを作成

## プロジェクト言語

このプロジェクトの公用語は**日本語**です。ただし、インラインコメントやドキュメンテーションコメントは英語でも可とします。